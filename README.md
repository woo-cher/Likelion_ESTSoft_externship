### ğŸ‘‰ğŸ¿ **EXTERNSHIP ì§€ì› ë™ê¸°**

> ì•ˆë…•í•˜ì„¸ìš”! ì‘ì€ ìŠ¤íƒ€íŠ¸ì—…ì—ì„œ **1ì¸ ê°œë°œ í™˜ê²½**ì—ì„œ 2ë…„ ê·¼ë¬´í–ˆë˜ **ì£¼ë‹ˆì–´ ê°œë°œì**ì…ë‹ˆë‹¤. ì´ë²ˆ **ìµìŠ¤í„´ì‹­**ì„ í†µí•´ ë‚˜ì˜ ê°œë°œ ë°©ì‹ì—ëŠ” ì–´ë–¤ ë¬¸ì œê°€ ìˆëŠ”ì§€, ì½”ë“œ ë¦¬ë·°ë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆëŠ” ê²ƒì€ ë¬´ì—‡ì¸ì§€, ê·¸ë¦¬ê³  ì²˜ìŒ ì‚¬ìš©í•´ë³´ëŠ” ê¸°ìˆ ë“¤ì— ëŒ€í•´ì„œ ìµí˜€ ë³´ê³  ì‹¶ì–´ì„œ **ì§€ì›**í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, ì´ë²ˆ ê²½í—˜ê³¼ í•¨ê»˜ ë‹¤ì‹œ **ì·¨ì—… ì„±ê³µ**ì— ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ í•˜ëŠ” ë°”ëŒì…ë‹ˆë‹¤ :)

###  ğŸ‘‰ğŸ¿ **MISSION ì ‘ê·¼**

> **JPA, Thymleaf, Gradle** ë“± ì²˜ìŒ ì‚¬ìš©í•´ë³´ëŠ” ê¸°ìˆ ë“¤ì´ ë§ì•˜ê¸° ë•Œë¬¸ì— ê³§ ë°”ë¡œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì™€ ê°€ì´ë“œ ì˜ˆì œ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ë©´ì„œ ì–´ëŠ ìƒí™©ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì¸ì§€ ë“±ì„ ë¨¼ì € ìµíˆë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë’¤, êµ¬í˜„ í•´ì•¼ ë˜ëŠ” ìš”êµ¬ ì‚¬í•­ì„ ê¸°ëŠ¥ ë³„ë¡œ ì •ë¦¬í•´ì„œ êµ¬í˜„í•˜ëŠ” í˜•íƒœë¡œ ì ‘ê·¼í•˜ì˜€ìŠµë‹ˆë‹¤. ë˜í•œ ë§¤ì£¼ **ê¸°ëŠ¥ êµ¬í˜„**ê³¼ ë”ë¶ˆì–´ **ë¦¬íŒ©í† ë§**ê¹Œì§€ í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ì¡ìœ¼ë ¤ê³  ë…¸ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

<p id="top">

# **ğŸ“—Â Contents**

</p>

### **1ï¸âƒ£Â [Tech Stack](#1%EF%B8%8Fâƒ£tech-stack)**

### **2ï¸âƒ£Â [Package Structure](#2%EF%B8%8Fâƒ£-package-structure)**

### **3ï¸âƒ£Â [Git issue & commit](#3%EF%B8%8Fâƒ£-git-issue--commit)**

### **4ï¸âƒ£Â [ë¯¸ì…˜ ë³„ Pull Request & ì£¼ìš” êµ¬í˜„ í˜•íƒœ](#4%EF%B8%8Fâƒ£-ë¯¸ì…˜-ë³„-pull-request-ë°-êµ¬í˜„-í˜•íƒœ)**

### **5ï¸âƒ£Â [Refactoring](#5%EF%B8%8Fâƒ£-refactoring)**

### **6ï¸âƒ£ [íšŒê³ ](#6%EF%B8%8Fâƒ£-íšŒê³ -1)**

<br>

# ****1ï¸âƒ£Â Tech Stack****

| Architecture | spring boot, secuirty, rest api |
| --- | --- |
| Server | Embedded Tomcat, Amazon ec2 |
| Build & Deploy | Gradle, Docker, Workflow |
| Database | MariaDB, JPA |
| Front-end | Thymeleaf |
| Other Tools | Github, Feign, Junit5 |

#### [ğŸ“¤ ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](#contents)

<br>

# 2ï¸âƒ£ ****Package Structure****

```
Based on - Module Lawyer

ğŸ“¦ backend-track
â”£ ğŸ“¦ project-lion-api / project-lion-web
â”ƒ â”£ ğŸ“‚ com.shop.projectlion
â”ƒ â”ƒ â”£ ğŸ“‚ api
â”ƒ â”ƒ â”ƒ â”£ ...
â”ƒ â”ƒ â”ƒ â”— ğŸ“‚ login (rest-contorller, service ...)
â”ƒ â”ƒ â”£ ğŸ“‚ domain
â”ƒ â”ƒ â”ƒ â”£ ...
â”ƒ â”ƒ â”ƒ â”— ğŸ“‚ item (item dto, repostiory ...)
â”ƒ â”ƒ â”£ ğŸ“‚ global
â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚ config
â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚ error
â”ƒ â”ƒ â”ƒ â”— ...
â”ƒ â”ƒ â”£ ğŸ“‚ infra
â”ƒ â”ƒ â”£ ğŸ“‚ web
â”ƒ â”ƒ â”ƒ â”£ ...
â”ƒ â”ƒ â”ƒ â”— ğŸ“‚ login (contorller, service ...)
â”£ â”ƒ ğŸ“‚ recources
â”ƒ â”— â”— ğŸ“‚ templates (html, css, js ...)
â”— ğŸ“‚ test
```

#### [ğŸ“¤ ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](#1tech-stack)

<br>

# 3ï¸âƒ£ Git issue & commit

<br>

> ğŸ‘‰ğŸ¿ **Git issue ì™€ commit í™œìš©**
> 
> ìš°ì„  ë§¤ì£¼ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ìš”êµ¬ ì‚¬í•­ë“¤ì„ ë¶„ë¦¬í•˜ì—¬ ì´ìŠˆ ë‹¨ìœ„ë¡œ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ëŸ° í›„ì—, ê°œë°œ ìœ í˜•ì— ë”°ë¼ `commit` ë©”ì‹œì§€ì— `í–‰ìœ„`ë¥¼ í¬í•¨í•˜ì—¬ ì‘ì„±í•˜ëŠ” í˜•íƒœë¡œ í”„ë¡œì íŠ¸ì— `push` í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ `commit` ë©”ì„¸ì§€ë¡œ í•˜ì—¬ê¸ˆ **ë™ë£Œ** ë˜ëŠ” **ë³¸ì¸**ì´ **ì–´ë–¤ í–‰ìœ„**ì™€ **ì‘ì—…**ì„ ì§„í–‰í–ˆëŠ”ì§€, í˜¹ì€ ì–´ë–¤ **ì´ìŠˆ**ë¥¼ í•´ê²°í•˜ê³ ì í•˜ì˜€ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë„ë¡ í•˜ê³ ì í•˜ì˜€ìŠµë‹ˆë‹¤.

> ğŸ’¡ **`Git iusse`** í™œì„±í™” í•˜ëŠ” ë°©ë²•ì„ ë’¤ëŠ¦ê²Œ í™•ì¸í•˜ì—¬, **4ì£¼ì°¨ ë¯¸ì…˜ë¶€í„°** `git issue` ì™€ **`commit`** ì„ ì—°ê³„ ì²˜ë¦¬ í•˜ì˜€ìŠµë‹ˆë‹¤.

<details>
<summary><h3 style="display: inline">ğŸ‘¥ Issue ê´€ë¦¬</h3></summary>
<div markdown="1">

- ë¯¸ì…˜ êµ¬í˜„ ì´ì „ì— `ê¸°ëŠ¥ ê°œë°œ`ê³¼ `ë¦¬íŒ©í† ë§` ì´ ë‘ ë¶„ë¥˜ì˜ ì´ìŠˆë¡œ ìš”êµ¬ ì‚¬í•­ì— ëŒ€í•´ ë¨¼ì € ì •ë¦¬í•˜ê³  ì§„í–‰í•˜ë ¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‘ì—…ì„ **ì„¸ë¶„í™”**í•´ì„œ ê¼¼ê¼¼í•˜ê²Œ ì²˜ë¦¬í•˜ë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.

![Untitled](./images/0.png)

![Untitled](./images/1.png)

</div>
</details>

<details>
<summary><h3 style="display: inline">ğŸ‘¥ ê°œë°œ ìœ í˜•ì— ë”°ë¥¸ commit ì ìš©</h3></summary>
<div markdown="1">

- **ê¸°ëŠ¥ ê°œë°œ (feat)**

```
"feat: refresh token ì„ ì´ìš©í•œ access token ì¬ë°œê¸‰ - close #7"
```

- `**ë²„ê·¸` í˜¹ì€ `ì˜¤ë¥˜` ì— ëŒ€í•œ ìˆ˜ì • (fix)**

```
"fix: login api ë§¤ê°œ ë³€ìˆ˜ ì˜¤ë¥˜ë¡œ ì¸í•´ íƒ€ì… ë¡¤ë°± ì²˜ë¦¬"
```

- **ì½”ë“œ ë¦¬íŒ©í† ë§ (refact)**

```
"refact: ì¤‘ë³µì´ ë°œìƒí•˜ëŠ” Token ê²€ì¦ ë¡œì§ì„ ë©”ì†Œë“œë¡œ ë¶„ë¦¬ - close #10"
```

#### [ğŸ“¤ ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](#1tech-stack)

</div>
</details>

<br>

# 4ï¸âƒ£ ë¯¸ì…˜ ë³„ Pull Request ë° êµ¬í˜„ í˜•íƒœ 

<br>

> ğŸ’¡ **ì½”ë“œëŸ‰ì´ ë§ì€ ìƒì„¸ êµ¬í˜„ í˜•íƒœì˜ ê²½ìš°, ë‚´ìš© ê¸¸ì´ ê´€ê³„ ìƒ ë”°ë¡œ ì •ë¦¬í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!**

<details>
<summary><h2 style="display: inline">â­ WEEK 1</h2></summary>
<div markdown="1">

<br>

**âœ… í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¸íŒ…**

**âœ… ë„¤ë¹„ê²Œì´ì…˜ë°”, í‘¸í„°, ì‡¼í•‘ëª° ê³µí†µ ë ˆì´ì•„ì›ƒ**

**âœ… íšŒì›ê°€ì… / ë¡œê·¸ì¸ / ë¡œê·¸ì•„ì›ƒ**

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Pull Request</h3></summary>
<div markdown="1">

> ğŸ”— **[1ì£¼ì°¨ ë¯¸ì…˜ ì œì¶œ (ì„ìš°ì² )](https://github.com/woo-cher/backend-track/pull/1)**
> ## ì ‘ê·¼ë°©ë²•
> - ì²˜ìŒ ì‚¬ìš©í•´ë³´ëŠ” ê¸°ìˆ ë“¤ì´ ìˆì–´ì„œ ê¸°ìˆ  ë³„ document ê³¼ ë°°ê²½ ì§€ì‹ íŒŒì¼ì„ ë³´ë©´ì„œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤
> - ê¸°ë³¸ìœ¼ë¡œ ì£¼ì–´ì§„ í´ë˜ìŠ¤ë“¤ì„ ìµœëŒ€í•œ ì´ìš©í•˜ë ¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤
> - ê¸°ëŠ¥ ìš”êµ¬ ì‚¬í•­ í™”ë©´ëŒ€ë¡œ êµ¬í˜„í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤
> ## íŠ¹ì´ì‚¬í•­
>
> - 1ì£¼ì°¨ ë¯¸ì…˜ ì¤‘ ì ‘ê·¼í•˜ê¸° ê°€ì¥ ì ‘ê·¼í•˜ê¸° ì–´ë ¤ìš´ ë¶€ë¶„ì´ **secuirty** ì˜€ëŠ”ë°ìš”. ë°°ê²½ì§€ì‹ íŒŒì¼ì— ì´ ë¶€ë¶„ì— ëŒ€í•œ ì •ë³´ê°€ ë¶€ì¡±í•˜ê²Œ ëŠê»´ì ¸ì„œ ì•„ì‰¬ì› ìŠµë‹ˆë‹¤.
> - íšŒì›ê°€ì… ê´€ë ¨ ì˜¤ë¥˜ ë©”ì‹œì§€ì˜ ê²½ìš°ëŠ” validation ì„ í†µí•´ ì²˜ë¦¬í•˜ë¼ëŠ” ë‚´ìš©ì´ ìˆì—ˆëŠ”ë°, login ê´€ë ¨ ì˜¤ë¥˜ì˜ ê²½ìš°ëŠ” ë¬´ì—‡ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ì§€ì— ëŒ€í•œ ë¶€ë¶„ì´ ì—†ì–´ì„œ ì•„ì‰¬ì› ë˜ ê²ƒ ê°™ì•„ìš”.

- **ê°•ì‚¬ë‹˜ ì½”ë“œ ë¦¬ë·° ì˜ê²¬**

![Untitled](./images/3.png)

</div>
</details>

> ğŸ‘‰ğŸ¿ **1ì£¼ì°¨ ë¯¸ì…˜ ì ‘ê·¼ ë°©ì‹**
>
> 1ì£¼ì°¨ì—ì„œëŠ” **secuirty** ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì •ì˜ëœ `UserDetails` ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ë‚´ ì„œë¹„ìŠ¤ì—ì„œ êµ¬ì„±í•œ `member` ì—”í„°í‹°ë¥¼ ì»¤ìŠ¤í…€í•´ì„œ íšŒì› ë¡œì§ì— ì ìš©í•˜ëŠ”ë° ì¤‘ì ì„ ë‘ê³  êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
>
> **ë ˆì´ì•„ì›ƒì˜ ê²½ìš°** jsp íŒŒì¼ì—ì„œ include í˜•íƒœë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì´ thymleaf ì—ë„ ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í•˜ì˜€ìŠµë‹ˆë‹¤.ê·¸ë˜ì„œ `dialect` ë¼ëŠ” ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì°¾ì•˜ê³ , ì´ë¥¼ í†µí•´ `thymeleaf` ê³µì‹ ë¬¸ì„œì™€ í•¨ê»˜ ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

### **ğŸ“– ì£¼ìš” êµ¬í˜„ í˜•íƒœ**

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Front layout</h3></summary>
<div markdown="1">
- í—¤ë”, í‘¸í„° ë“±ì„ ì¡°ê°(fragment) ìœ¼ë¡œ ë‚˜ëˆ„ê³  **[thymeleaf-layout-dialect](https://github.com/ultraq/thymeleaf-layout-dialect)** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ ìœ„ ì¡°ê°ë“¤ì„ ëª¨ì•„ì„œ êµ¬ì„±

```html
<html lang="ko" ... xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
...
<body>
    <!-- header -->
    <header th:replace="/layout/fragments/header :: headerFragment"></header>

    <!-- content -->
    <div layout:fragment="content"></div>
		...
</body>
</html>
```
</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Spring Security</h3></summary>
<div markdown="1">

- UserDetail ë¥¼ ì„œë¹„ìŠ¤ ë‚´ `Member` ë¡œ ì¬ì •ì˜

```java
public class UserDetailsImpl implements UserDetails {
		private final Member member;

		...

		@Override
    public Collection<? extends GrantedAuthority> getAuthorities() {
        Set<GrantedAuthority> roles = new HashSet<>();
        roles.add(new SimpleGrantedAuthority("ROLE_" + member.getRole().name()));
        return roles;
    }

		...
}
```

</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Validation</h3></summary>
<div markdown="1">

- ì—”í„°í‹° í•„ë“œ ê²€ì‚¬ì˜ ê²½ìš° `javax.validaton` ë¥¼ ì´ìš©í•´ ì²˜ë¦¬

```java
@Getter @Setter
public class MemberRegisterDto {

    @NotBlank(message = "ì´ë¦„ì€ í•„ìˆ˜ ê°’ì…ë‹ˆë‹¤.")
    private String name;

    @NotBlank(message = "ì´ë©”ì¼ì€ í•„ìˆ˜ ì…ë ¥ ê°’ì…ë‹ˆë‹¤.")
    @Email(message = "ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.")
    private String email;

    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ ì…ë ¥ ê°’ì…ë‹ˆë‹¤.")
    @Length(min = 8, max = 16, message = "ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒ, 16ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”")
    private String password;
		
    ...
}
```

```html
<!-- (front) show error message -->
<span class=".." th:if="${#fields.hasErrors('name')}" th:errors="{name}"></span>
```

</div>
</details>

</div>
</details>

<br>
<details>
<summary><h2 style="display: inline">â­ WEEK 2</h2></summary>
<div markdown="1">

âœ… ì¸ì¦ ì—¬ë¶€ / ê¶Œí•œì— ë”°ë¥¸ ë©”ë‰´ ë…¸ì¶œ ì œì–´

âœ… ìƒí’ˆ ë“±ë¡ / ì¡°íšŒ / ìˆ˜ì •

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Pull Request</h3></summary>
<div markdown="1">

> ğŸ”— **[2ì£¼ì°¨ ë¯¸ì…˜ ì œì¶œ (ì„ìš°ì² )](https://github.com/woo-cher/backend-track/pull/2)**
>
> ## **ë¯¸ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸**
>
> âœ…Â ë¡œê·¸ì¸ ì‹œ ADMIN ê¶Œí•œì„ ê°€ì§„ íšŒì›ì˜ ê²½ìš° ë„¤ë¹„ê²Œì´ì…˜ë°”ì— â€œìƒí’ˆ ë“±ë¡â€ ë©”ë‰´ ë…¸ì¶œ (íšŒì›ì˜ ROLE ì´ ADMINì¸ ê²½ìš°)
>
> âœ…Â ìƒí’ˆ ë“±ë¡
>
> âœ…Â ìƒí’ˆ ì¡°íšŒÂ **(ìƒí’ˆ ìˆ˜ì • í˜ì´ì§€)**
>
> âœ…Â ìƒí’ˆ ì—…ë°ì´íŠ¸Â **(ìƒí’ˆ ìˆ˜ì • í˜ì´ì§€)**
>
> ## ì ‘ê·¼ë°©ë²•
>
> - JPA ë¥¼ ì²˜ìŒ ì¨ë³´ëŠ”ë° ê´€ê³„ ë§¤í•‘ í•˜ëŠ” ê²ƒ ë¶€í„° ì–´ë ¤ì›Œì„œ ì• ë¥¼ ë§ì´ ë¨¹ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ, doc ì™¸ ì—¬ëŸ¬ ìë£Œë“¤ì„ ì°¸ê³ í•˜ë©´ì„œ ìµœëŒ€í•œ ë§ëŠ” ë°©í–¥ìœ¼ë¡œ ì„¤ê³„í•˜ë ¤ê³  ë…¸ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤
> - ì—”í„°í‹°ê°„ ê´€ê³„ê°€ í˜•ì„± ë˜ë©´ì„œ ë¶ˆí•„ìš”í•œ ì¿¼ë¦¬ ë¡œê·¸ê°€ ë§ì´ ì°íˆëŠ” ê²ƒ ê°™ì•˜ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ, ì²˜ìŒì— ê¸°ëŠ¥ì„ ë§Œë“¤ë©´ì„œ ë¶ˆí•„ìš”í•œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ìƒê°ì„ í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤.
> - ìƒí™©ì— ë§ëŠ” cascade ì •ì±…ì„ ì ìš©í•´ë³´ë ¤ê³  í–ˆìŠµë‹ˆë‹¤. ì˜ˆ) ìƒí’ˆ ì‚­ì œ ì‹œ ìƒí’ˆê³¼ ê´€ë ¨ëœ ì´ë¯¸ì§€ ë°ì´í„°ê°€ ëª¨ë‘ ì‚­ì œ í•˜ê¸° ìœ„í•´ ~REMOVE ì ìš©
> - ìƒí™©ì— ë”°ë¼ ì—”í„°í‹° ë˜ëŠ” Dto ë¥¼ ì‚¬ìš©í•´ì„œ í•„ìš”í•œ ë°ì´í„°ë§Œì„ ì‚¬ìš©í•˜ë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.
>
> ## íŠ¹ì´ì‚¬í•­
>
> - ê¸°ìˆ ë“¤ì„ ì¶©ë¶„íˆ ì‹¤ìŠµí•˜ê³  ì¨ë³´ë©´ì„œ ë¯¸ì…˜ì— ì ìš©í•˜ê³  ì‹¶ì—ˆëŠ”ë° ì‹œê°„ì´ ìƒê°ë³´ë‹¤ ì—¬ìœ ë¡­ì§€ ì•Šì•„ì„œ ì œëŒ€ë¡œ ì ìš©í•˜ì§€ ëª»í•œ ê²ƒ ê°™ì•„ ì•„ì‰½ìŠµë‹ˆë‹¤
> - ì—°ê´€ ê´€ê³„ê°€ ìˆëŠ” ì—”í„°í‹°ë¥¼ save í•  ë•Œ ì˜ì†ì„±ì„ ì´ìš©í•´ì„œ ì½”ë“œë¥¼ ì¤„ì´ê³  ì‹¶ì—ˆëŠ”ë° ì˜ ì‚¬ìš©í•˜ì§€ ëª»í•´ ì•„ì‰½ìŠµë‹ˆë‹¤
> - CRUD ì‘ì ‘ì„ í•˜ë‹¤ ë³´ë‹ˆê¹Œ Entity <--> Dto ë¡œ ì„œë¡œ ë³€í™˜í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì—ì„œ ë©”ì†Œë“œ ë„¤ì´ë°ì´ë‚˜ ì½”ë“œ ë¦¬íŒ©í† ë§ì„ í•˜ì§€ ëª»í•´ì„œ ê°€ë…ì„±ì´ ë§ì´ ë¶€ì¡±í•œ ê²ƒ ê°™ì•„ ì•„ì‰½ìŠµë‹ˆë‹¤.

- **ê°•ì‚¬ë‹˜ ì½”ë“œ ë¦¬ë·° ì˜ê²¬**

![Untitled](./images/4.png)

</div>
</details>

> ğŸ‘‰ğŸ¿ **2ì£¼ì°¨ ë¯¸ì…˜ ì ‘ê·¼ ë°©ì‹**
>
> ì´ë²ˆ ê³¼ì •ì—ì„œ **`JPA`** ë¥¼ ì²˜ìŒ ì‚¬ìš©í•´ë³´ëŠ” ê²ƒì´ì—ˆê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ì¸ ê´€ê³„ ë§¤í•‘ë¶€í„° ì¿¼ë¦¬ê°€ ì–´ë–¤ í˜•íƒœë¡œ ë‚ ë¼ê°€ëŠ” ê²ƒì¸ì§€ ë“±ì„ ë¨¼ì € ì‹¤ìŠµ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.
>
> í›„ì— ë¯¸ì…˜ì„ êµ¬í˜„í•  ë•Œì—ëŠ” `ìµœëŒ€í•œ ì‘ì€ íšŸìˆ˜ ì¿¼ë¦¬ë¡œ í•„ìš”í•œ ë°ì´í„°ë§Œ ëª¨ë‘ ì¡°íšŒ` í•˜ëŠ” ë°©í–¥ê³¼ `ì¿¼ë¦¬ ì¡°íšŒ ë°˜í™˜ íƒ€ì…ì„ DTO ë¡œ ë°”ë¡œ ë°˜í™˜í•´ì„œ, ë¶ˆí•„ìš”í•œ ì»¬ëŸ¼ì€ ì¡°íšŒí•˜ì§€ ì•ŠëŠ”` ë°©í–¥ì„ ì¤‘ì ì ìœ¼ë¡œ ì‹ ê²½ì“°ë©´ì„œ ê°œë°œí•˜ë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.

### **ğŸ“– ì£¼ìš” êµ¬í˜„ í˜•íƒœ**

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Interface-Based Projections</h3></summary>
<div markdown="1">

- DTO ë¡œ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë§¤í•‘í•˜ì—¬ í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì¡°íšŒ

```java
// ì—”í„°í‹°ë¡œ ì¡°íšŒê°€ í•„ìš”í•œ ê²½ìš°, ë©”ì†Œë“œ ì¬ì‚¬ìš©ì„ ìœ„í•´ ì œë„¤ë¦­ íƒ€ì… ì‚¬ìš©
public interface DeliveryRepository extends JpaRepository<Delivery, Long> {
    <T> List<T> findAllByMemberId(long memberId, Class<T> clazz);
}

// use
public List<DeliveryDto> findAllDeliveryByMember(long id) {
    return deliveryRepository.findAllByMemberId(id, DeliveryDto.class);
}
```

</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Custom Validator</h3></summary>
<div markdown="1">

- íŠ¹ìˆ˜ í•„ë“œ ê°’ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•´ Custom Validator êµ¬í˜„

```java
@Component
public class UpdateItemValidator implements Validator {

    @Override
    public boolean supports(Class<?> clazz) {
        ...
    }

    @Override
    public void validate(Object target, Errors errors) {
        ...
    }
}
```

</div>
</details>

</div>
</details>

<details>
<summary><h2 style="display: inline">â­ WEEK 3</h2></summary>
<div markdown="1">

**âœ… ë©”ì¸ í˜ì´ì§€ ìƒí’ˆ ì¡°íšŒ (Paging)**

**âœ… ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ì¡°íšŒ**

**âœ… ì£¼ë¬¸ ìƒì„± / ì¡°íšŒ / ì·¨ì†Œ êµ¬í˜„í•˜ê¸°**

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Pull Request</h3></summary>
<div markdown="1">

> ğŸ”— **3[ì£¼ì°¨ ë¯¸ì…˜ ì œì¶œ (ì„ìš°ì² )](https://github.com/woo-cher/backend-track/pull/3)**
>
> ## **ë¯¸ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸**
>
> âœ…Â **ë©”ì¸ í˜ì´ì§€ ìƒí’ˆ ì¡°íšŒ êµ¬í˜„**
>
> âœ…Â **ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ì¡°íšŒ êµ¬í˜„**
>
> **âœ…Â ì£¼ë¬¸ í•˜ê¸° êµ¬í˜„**
>
> **[ì¶”ê°€ ê³¼ì œ]**
>
> **âœ…Â ì£¼ë¬¸ ì´ë ¥ ì¡°íšŒ**
>
> **âœ…Â ì£¼ë¬¸ ì·¨ì†Œ**
>
> ## ì ‘ê·¼ë°©ë²•
>
> - í•„ìš”í•œ ëª‡ ê°œì˜ ì»¬ëŸ¼ ë°ì´í„°ë§Œì„ ì¶”ì¶œí•˜ê¸° ìœ„í•´ì„œ ì£¼ì–´ì§„ DTOì™€ Repository ë¥¼ ë§¤í•‘í•˜ì—¬ ê³§ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì‹ ê²½ ì“°ë©´ì„œ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.
> - `Fetch Join`Â ì„ ì‚¬ìš©í•´ì„œ ëª¨ë“  ì»¬ëŸ¼ì„ ì¡°íšŒí•˜ê¸° ë³´ë‹¤ëŠ”Â `Inner Join`Â ì„ ì‚¬ìš©í•˜ì—¬ í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì¡°íšŒí•˜ë„ë¡ ì¿¼ë¦¬ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤
> - update ì‘ì—…ì˜ ê²½ìš°, ì—”í„°í‹° ì˜ì†ì„±ì„ í™œìš©í•´ì„œ ë§Œë“¤ì–´ë³´ë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤
>
> ## íŠ¹ì´ì‚¬í•­
>
> - ì¼ë¶€ Controller ì—ì„œ ResponseEntity í˜•íƒœë¡œ ë¦¬í„´í•˜ê³  ìˆëŠ”ë°, ì°¨í›„ ì´ëŸ¬í•œ í˜•íƒœê°€ ë§ì•„ì§€ê²Œ ë˜ë©´ í•´ë‹¹ ë¶€ë¶„ì€ ê¸€ë¡œë²Œ í•¸ë“¤ëŸ¬ë¡œ ë¦¬íŒ©í† ë§ í•  ì˜ˆì •ì…ë‹ˆë‹¤
> - ì´ë¯¸ì§€ê°€ ë¶ˆëŸ¬ì™€ì§€ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ë‹¨ìˆœí•œ ë¬¸ì œì˜€ëŠ”ë°, í¬ë¡¬ ë¬¸ì œë¡œ ìƒê°í•˜ê³  ì´ë˜ ì €ë˜ ì‹œê°„ì„ ë§ì´ ì†Œë¹„í•œ ê²Œ ì•„ì‰½ìŠµë‹ˆë‹¤.
> - ì¬ê³ ê°€ ë¶€ì¡±í•œ ìƒí™©ì„ Front ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆë‹¤ëŠ” ê±¸ ë’¤ëŠ¦ê²Œ ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ê±¸ ëª¨ë¥´ê³  ì €ëŠ” ì„œë²„ ë‹¨ì—ì„œ ì¬ê³  ì»¬ëŸ¼ ê°’ì„ ì¡°íšŒí•´ì„œ ì²˜ë¦¬ë¥¼ í•´ë²„ë ¸ë„¤ìš”.. ì•„ì‰½ìŠµë‹ˆë‹¤.
>
> ## ****ê¶ê¸ˆí•œ ì ****
>
> - ì—¬ëŸ¬ ê´€ê³„ ì»¬ëŸ¼ë“¤ì„ ì¡°íšŒí•  ë•Œ, ì–´ë–¤ ë°©í–¥ìœ¼ë¡œ ì ‘ê·¼í•´ì•¼ í•˜ëŠ”ì§€ ì•„ì§ ê°ì´ ì˜ ì˜¤ì§€ ì•ŠìŠµë‹ˆë‹¤.. ê¸°ë³¸ join ë¬¸ë²•ìœ¼ë¡œ í•„ìš” ì»¬ëŸ¼ë§Œì„ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ì˜³ì€ ë°©í–¥ì¸ì§€ ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤. JPA ê°€ ì°¸ ì–´ë µë„¤ìš” ã… 
> - ì´ë²ˆ ì£¼ì°¨ì—ëŠ”Â **`@query`**Â ë¥¼ ë§ì´ ì‚¬ìš©í•´ì„œ ì§ì ‘ ì¿¼ë¦¬ë¬¸ì„ ì‘ì„±í•˜ì˜€ëŠ”ë°, ì¿¼ë¦¬ê°€ ê¸¸ì–´ì§ì— ë”°ë¼ ê°€ë…ì„± ë¶€ë¶„ì—ì„œ ë§ì´ ì•„ì‰¬ì›€ì´ ëŠê»´ì¡ŒìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ë³´í†µ ì–´ë–»ê²Œ ì²˜ë¦¬ í•˜ëŠ” ê±¸ê¹Œìš”??

- **ê°•ì‚¬ë‹˜ ì½”ë“œ ë¦¬ë·° ì˜ê²¬**

![Untitled](./images/5.png)

</div>
</details>
    
> ğŸ‘‰ğŸ¿ **3ì£¼ì°¨ ë¯¸ì…˜ ì ‘ê·¼ ë°©ì‹**
>
> DTO ì— ì—¬ëŸ¬ ì—°ê´€ ê´€ê³„ ì—”í„°í‹° í•„ë“œ ë°ì´í„°ê°€ í•„ìš”í•œ ê²½ìš° **`fetct join`** ì„ ì‚¬ìš©í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤.
> ì´ ê³¼ì •ì—ì„œ ë¶ˆí•„ìš”í•œ ì»¬ëŸ¼ ë°ì´í„°ê¹Œì§€ ê°€ì ¸ì˜¤ëŠ” **(over fetching)** í˜„ìƒì„ ë°œê²¬í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ, **`inner join`** ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‘ì„±í•˜ëŠ” í˜•íƒœë¡œ êµ¬í˜„í•˜ì—¬ í•„ìš”í•œ ì»¬ëŸ¼ ë°ì´í„°ë§Œ ì¶”ì¶œí•˜ëŠ”ë° ì¤‘ì ì„ ë‘ê³  êµ¬í˜„í•˜ë ¤ ë…¸ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤.

### **ğŸ“– ì£¼ìš” êµ¬í˜„ í˜•íƒœ**

<br>
<details style="padding-left: 2%">
<summary><h3 style="display: inline">Inner Join</h3></summary>
<div markdown="1">

- **ë°˜í™˜ íƒ€ì…ì„ DTO ë¡œ ë§¤í•‘**
- **`Inner join` ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‘ì„±í•˜ì—¬ í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì¡°íšŒ**

```java
// ItemRepository.java

@Query("SELECT new com.shop.projectlion.web.main.dto.MainItemDto(i.id, i.itemName, i.itemDetail, it.imageUrl, i.price) " +
        "FROM item i JOIN item_image it ON i.id = it.item.id " +
        "WHERE i.itemSellStatus = 'SELL' AND it.isRepImage = true " +
        "AND (i.itemName LIKE %:query% OR i.itemDetail LIKE %:query%)")
Page<MainItemDto> findAllBySearchQuery(@Param("query") String searchQuery, Pageable pageable);
```

</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Custom Exception</h3></summary>
<div markdown="1">

- **ì˜¤ë¥˜ ë©”ì‹œì§€ì— íŠ¹ì • `param` ê°’ì„ ë„£ì–´ì„œ ì˜ˆì™¸ë¥¼ ë˜ì§€ê¸° ìœ„í•´ ìƒì„±ìë¥¼ ì•„ë˜ì™€ ê°™ì´ ì •ì˜**

```java
@Getter
public class BusinessException extends RuntimeException {
    private final ErrorCode errorCode;

    ...

    public BusinessException(ErrorCode errorCode, String append) {
        super(errorCode.getMessage() + append);
        this.errorCode = errorCode;
    }
}
```

```java
// use
if (item.getStockNumber() < insertOrderDto.getCount()) {
    throw new BusinessException(ErrorCode.NOT_ENOUGH_STOCK_NUMBER, stockNumberErrorMessage(item.getStockNumber()));
}
```

</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Response Entity</h3></summary>
<div markdown="1">

- **ë¹„ë™ê¸° API ìš”ì²­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‘ë‹µ ì²˜ë¦¬**

```java
@PostMapping("/order")
public @ResponseBody ResponseEntity saveOrder(...) {

    try {
        ...
        return ResponseEntity.ok().build();
    } catch (BusinessException e) {
        ...
        return ResponseEntity.status(e.getErrorCode()
                    .getStatus())
                    .body(e.getMessage());
    }
}
```

```jsx
$.ajax({
    ...
    success  : function(result, status){
        ...
    },

    error : function(jqXHR, status, error){
        if(...) {
            alert(jqXHR.responseText);
        }
    }
});
```

</div>
</details>

</div>
</details>

<details>
<summary><h2 style="display: inline">â­ WEEK 4</h2></summary>
<div markdown="1">

**âœ… Health Check API êµ¬í˜„**

**âœ… ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬ êµ¬í˜„**

**âœ… ì¹´ì¹´ì˜¤ í† í° ë°œê¸‰**

**âœ… ì†Œì…œ ë¡œê·¸ì¸ ë° íšŒì›ê°€ì…, JWT ë°˜í™˜**

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Pull Request</h3></summary>
<div markdown="1">

> ğŸ”— [4**ì£¼ì°¨ ë¯¸ì…˜ ì œì¶œ (ì„ìš°ì² )**](https://github.com/woo-cher/backend-track/pull/12)
>
> ## **ë¯¸ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸**
>
> ### **âœ…Â ë¯¸ì…˜ 1**
>
> - Health check api
>
> ### **âœ…Â ë¯¸ì…˜ 2**
>
> - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ìœ¼ë¡œ í† í°ì„ íšë“
>
> ### **âœ…Â ë¯¸ì…˜ 3**
>
> - ë°œê¸‰ ë°›ì€ ì¹´ì¹´ì˜¤ access tokenì„ ì´ìš©í•˜ì—¬ ì¹´ì¹´ì˜¤ íšŒì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™€ì„œ íšŒì› ê°€ì… ì§„í–‰
> - ì •ìƒì ìœ¼ë¡œ íšŒì› ê°€ì… or íšŒì› ê°€ì… í›„ ë‹¤ì‹œ ë¡œê·¸ì¸ ì‹œ access token, refresh token ë°˜í™˜
> - íšŒì› ê°€ì…ì´ ì•ˆëœ íšŒì›ì´ë©´ ì§„í–‰, ì•„ë‹ˆë¼ë©´ refresh í† í° ë° ë§Œë£Œ ì‹œê°„ ê°±ì‹ 
>
> ### **âœ…Â ë¯¸ì…˜ 4**
>
> - jwt ë¦¬í”„ë ˆì‹œ í† í°ìœ¼ë¡œ ì—‘ì„¸ìŠ¤ í† í°ì„ ì¬ë°œê¸‰
>
> ### **âœ…Â ë¯¸ì…˜ 5**
>
> - jwt ì—‘ì„¸ìŠ¤ í† í°ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒ ìš”ì²­
> - ë¡œê·¸ì•„ì›ƒ ì„±ê³µ ì‹œ, í•´ë‹¹ íšŒì›ì˜ ë¦¬í”„ë ˆì‹œ í† í°ì„ ë§Œë£Œ ì²˜ë¦¬
>
> ## ì ‘ê·¼ë°©ë²•
>
> - api ì„œë²„ë¥¼ ë³„ë„ë¡œ ë‘ê³  ì†Œì…œ ë¡œê·¸ì¸ê³¼ jwt í† í° ì¸ì¦ ë°©ì‹ì„ ì§ì ‘ êµ¬í˜„í•´ë³¸ ì ì€ ì—†ì–´ì„œ ì´í•´í•˜ëŠ”ë° ì‹œê°„ì´ ë§ì´ ê±¸ë ¸ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ëŸ¬í•œ í˜•íƒœë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ë§ëŠ” ë°©í–¥ì¸ì§€ ê°ì´ ì˜ ì˜¤ì§ˆ ì•Šì•˜ìŠµë‹ˆë‹¤
> - **Feign Client** ë¥¼ ì¨ë³´ë©´ì„œ ì™¸ë¶€ api í˜¸ì¶œì— ëŒ€í•œ í¸ì˜ì„±ì„ ëŠë‚„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³ , api ìš”ì²­ì— í•„ìš”í•œ íŒŒë¼ë¯¸í„°ê°€ ë§ì€ ê²½ìš° dto ë“±ì˜ ê°ì²´ í•„ë“œë¥¼ ë§¤í•‘í•´ì„œ ìš”ì²­ íŒŒë¼ë¯¸í„°ì— ì „ë‹¬ë  ìˆ˜ ìˆê²Œ í•˜ë ¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤.
> - ì²˜ìŒì—ëŠ”Â `kakao`Â ì†Œì…œ ë¡œê·¸ì¸ì— ì¢…ì† ëœ ì²´ë¡œ, ë¡œê·¸ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬í˜„í•œ ë’¤ ì°¨í›„Â `Naver`,Â `Kakao`Â ë“±ì˜ ì†Œì…œ ë¡œê·¸ì¸ì„ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë¦¬íŒ©í† ë§ í–ˆìŠµë‹ˆë‹¤.
> - secuirty ë¥¼ ì–¹ìœ¼ë©´, ë§ì´ ë³µì¡í•´ì§ˆ ê²ƒ ê°™ì•„ì„œ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
>
> ## íŠ¹ì´ì‚¬í•­
>
> - ì „ ì£¼ì°¨ì˜ pull req ì™€ merge í›„, ë¦¬íŒ©í† ë§ ëˆ„ë½ëœ ë¶€ë¶„ì´ ìˆì–´ì„œ ì´ë²ˆ ì£¼ì°¨ì— í•¨ê»˜ í¬í•¨ë˜ì–´ ë²„ë¦° ì  ì–‘í•´ ë¶€íƒë“œë¦½ë‹ˆë‹¤Â â˜¹ï¸
> - `Header`Â í† í° ê°’ ì¡´ì¬ ì—¬ë¶€ íŒë‹¨ì˜ ê²½ìš°Â `Interceptor`Â ë¥¼ êµ¬í˜„í•˜ë ¤ í–ˆìœ¼ë‚˜, ì°¨ ì£¼ ë¯¸ì…˜ì— í¬í•¨ ë˜ì–´ ìˆë‹¤ê³  í•˜ì…”ì„œ ìš°ì„ Â `GlobalHandler`Â ì— êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

- **ê°•ì‚¬ë‹˜ ì½”ë“œ ë¦¬ë·° ì˜ê²¬**

![Untitled](./images/6.png)

</div>
</details>

> ğŸ‘‰ğŸ¿ **4ì£¼ì°¨ ë¯¸ì…˜ ì ‘ê·¼ ë°©ì‹**
>
> - **`ì†Œì…œë¡œê·¸ì¸`**, **`jwt token`** ì„ ì§ì ‘ êµ¬í˜„í•´ë³¸ ì ì´ ì—†ì–´ì„œ ê°œë…ì„ ë¨¼ì € ì´í•´í•˜ë ¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤.
>
> - ìš”êµ¬ ì‚¬í•­ì—ëŠ” **`ì¹´ì¹´ì˜¤`** ë°–ì— ì—†ì—ˆì§€ë§Œ, **`ë„¤ì´ë²„`**, **`êµ¬ê¸€`** ë“±ì˜ ë‹¤ë¥¸ ì†Œì…œ ê°ì²´ì— ëŒ€í•œ ë¶€ë¶„ë„ ì—¼ë‘í•˜ê³  ì†Œì…œ ë¡œê·¸ì¸ì— **`ì¶”ìƒí™”`** ê°œë…ì„ ì ìš©í•˜ëŠ”ë° ê¹Œì§€ ëª©í‘œë¥¼ ì¡ì•˜ìŠµë‹ˆë‹¤
>
> - **`Feign client`** ë¡œ api ìš”ì²­ ì‹œ, **dynamic url** ì„ ì ìš©í•˜ì—¬ í•˜ë‚˜ì˜ **`client interface`** ë¡œ ëª¨ë“  api ìš”ì²­ì„ ì²˜ë¦¬í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤.

### **ğŸ“– ì£¼ìš” êµ¬í˜„ í˜•íƒœ**

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Social ë¡œì§ ì¶”ìƒí™”</h3></summary>
<div markdown="1">

- **Social ë¡œì§ì˜ ê³µí†µ í–‰ìœ„ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶”ìƒí™”**

```java
public interface SocialLoginClient {
    SocialTokenResponseDto getSocialTokenByAuth(SocialTokenReqDto socialTokenReqDto);
    SocialMemberInfo getSocialMemberInfoByToken(URI baseUrl, String socialAccessToken);
}
```

```java
public interface SocialMemberInfo {
    String getSocialName();
    String getSocialEmail();
}
```

- **Factory íŒ¨í„´ì„ ì´ìš©í•˜ì—¬, ì¶”ìƒí™” ê°ì²´ì— ì‹¤ì œ í–‰ë™ ê°ì²´ë¥¼ ì£¼ì…**

```java
public class SocialApiClientFactory {

    private final KakaoLoginFeignClient kakaoLoginFeignClient;

    public SocialLoginClient getSocialLoginClient(MemberType memberType) {
        
        return switch (memberType) {
            case KAKAO -> kakaoLoginFeignClient;
            case NAVER, GOOGLE, GENERAL -> null;
        };
    }

}
```

```java
**// use**
public class SocialLoginService {

    private final SocialApiClientFactory apiClientFactory;

    public SocialTokenResponseDto getSocialToken(MemberType memberType, SocialTokenReqDto socialTokenRequestDto) {
        SocialLoginClient client = apiClientFactory.getSocialLoginClient(memberType);
        return client.getSocialTokenByAuth(socialTokenRequestDto);
    }

    ...
}
```

</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Feign Client ìš”ì²­ íŒŒë¼ë¯¸í„°ê°€ ë§ì€ ê²½ìš° ì²˜ë¦¬</h3></summary>
<div markdown="1">

- SpringQueryMap ì„ ì´ìš©í•˜ì—¬, íŒŒë¼ë¯¸í„°ë¥¼ DTO ê°ì²´ë¡œ ìš”ì²­

```java
@FeignClient(url = "..", name = "..")
public interface SomeClient {

    @PostMapping(value = "..", headers = "..")
    SomeDto getSomething(**@SpringQueryMap** ReqDto reqDto);

}
```

</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Feign Dynamic url</h3></summary>
<div markdown="1">

- **ë™ì¼ ì†Œì…œ api ë‚´ì—ì„œ url host ê°€ ë‹¤ë¥¸ ê²½ìš° dynamic url ì²˜ë¦¬**

```java
@FeignClient(url = "..", name = "..")
public interface FooClient {

    // Api Client dynamic url -> "baseUrl/bar"
    @PostMapping(value = "/bar")
    SomeFooDto getSomething(URI baseUrl, String param);
}
```

</div>
</details>

</div>
</details>

<details>
<summary><h2 style="display: inline">â­ WEEK 5</h2></summary>
<div markdown="1">

**âœ… ìƒí’ˆ ë“±ë¡ / ì¡°íšŒ / ìˆ˜ì • API êµ¬í˜„**

**âœ… ìƒí’ˆ ìˆ˜ì • í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±**

**âœ… Swagger ë¥¼ ì´ìš©í•œ API ë¬¸ì„œí™”**

**âœ… ìë™ ë°°í¬ ì„¤ì • (CI/CD)**

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Pull Request</h3></summary>
<div markdown="1">

> ğŸ”— [**5ì£¼ì°¨ ë¯¸ì…˜ ì œì¶œ (ì„ìš°ì² )**](https://github.com/woo-cher/backend-track/pull/21)
>
> ## **ë¯¸ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸**
>
> **âœ…Â ë¯¸ì…˜ 1 :Â ì¸ì¦ ì¸í„°ì…‰í„°**
>
> **âœ…Â ë¯¸ì…˜ 2 : ì¸ê°€ ì¸í„°ì…‰í„°**
>
> **âœ…Â ë¯¸ì…˜ 3 : ìƒí’ˆ ì¡°íšŒ API êµ¬í˜„**
>
> **âœ…Â ë¯¸ì…˜ 4 : ìƒí’ˆ ì—…ë°ì´íŠ¸ API êµ¬í˜„**
>
> **âœ…Â ë¯¸ì…˜ 5 : ìƒí’ˆ ìˆ˜ì • í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±**
>
> **âœ… ë¯¸ì…˜ 6 : swagger ìƒí’ˆ ìˆ˜ì • API ë¬¸ì„œí™”**
>
> **âœ…Â ë¯¸ì…˜ 7 : CI/CD**
>
> ## ì ‘ê·¼ë°©ë²•
>
> - docker, workflow ë“± ì²˜ìŒ ì‚¬ìš©í•´ë³´ëŠ” ë¶€ë¶„ì´ ë§ì•„ì„œ ì£¼ì–´ì§„ ë°°ê²½ ì§€ì‹ì„ ìµœëŒ€í•œ ìˆ™ì§€í•˜ê³  ì‚¬ìš©í•˜ë ¤ í–ˆìŠµë‹ˆë‹¤.
> - ë°°í¬ë¥¼ ì‹¤ìŠµ í•˜ëŠ” ê³¼ì •ì—ì„œ ì—¬ëŸ¬ ì˜¤ë¥˜ ë“¤ì„ ë§Œë‚˜ì„œ, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ì¼€ì´ìŠ¤ë¥¼ ì°¾ì•„ë³´ê³  í•´ê²°í•˜ë ¤ê³  í–ˆìŠµë‹ˆë‹¤.
> - ìƒí’ˆ ì¡°íšŒì˜ ê²½ìš°, ì—¬ëŸ¬ ì—”í„°í‹°ë“¤ê³¼ ì—°ê´€ ê´€ê³„ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì—,Â `fetch join`Â ì„ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
> - í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ê¸°ëŠ¥ì  ê²€ì¦ ë¿ë§Œ ì•„ë‹ˆë¼, ì˜ˆì™¸ ìƒí™©ì— ëŒ€í•œ ê²€ì¦ ì¼€ì´ìŠ¤ë„ ìƒê°í•´ë³´ê³  ì½”ë“œë¥¼ ì‘ì„±í•˜ë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³ , Mock ê°ì²´ë¥¼ ì´ìš©í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë‹¤ë¥¸ ì˜ì—­ì—ì„œë„ í™œìš©í•´ë³´ê¸° ìœ„í•´ Interceptor í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤.
>
> ## íŠ¹ì´ì‚¬í•­
>
> - ë¯¸ì…˜ì—ì„œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì„ ë¨¼ì € êµ¬í˜„í•˜ê³  ì¶”ê°€ì ìœ¼ë¡œ ë‹¤ë¥¸ API ë¬¸ì„œí™” ë° í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹ ê²½ ì“°ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, CI/CD ë¥¼ ì´ìš©í•œ ë°°í¬ë¥¼ í•˜ëŠ” ê³¼ì •ì—ì„œ ì—¬ëŸ¬ ì˜¤ë¥˜ë¥¼ ê²ªì–´ ì‹œê°„ì„ ë§ì´ ì†Œë¹„í•˜ê²Œ ë˜ì–´ ì•„ì‰½ìŠµë‹ˆë‹¤.
> - ê¹ƒì— ì˜¬ë¦¬ì§€ ì•ŠëŠ” ì„¤ì • íŒŒì¼ì¸Â `env.properties`Â ë¥¼ ë°°í¬ ì‹œì— ì°¾ì§€ ëª»í•´ì„œ ec2 ì„œë²„ê°€ ê°€ë™ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, ì—¬ëŸ¬ ëª¨ë¡œ ì°¾ì•„ë³´ì•˜ì§€ë§Œ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤. ê²°êµ­ ë‹µì•ˆì„ ì°¾ì§€ ëª»í•´ì„œ í•´ë‹¹ íŒŒì¼ì„ git ì— ì—…ë¡œë“œ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
> - ë§ˆë¬´ë¦¬ í•˜ê³  ì½”ë“œ ë¦¬íŒ©í† ë§ì— ì‹œê°„ì„ ë§ì´ íˆ¬ì ëª»í•´ì„œ ì•„ì‰½ë„¤ìš” :(
>
> ## ****ê¶ê¸ˆí•œ ì ****
>
> â€¢ ì €ëŠ” ì—¬íƒœê» ë¯¼ê°í•œ ì •ë³´ë¥¼ ìˆ¨ê¸°ê¸° ìœ„í•´ ë¡œì»¬ì—ì„œ ë”°ë¡œ ê´€ë¦¬í•˜ëŠ” í˜•íƒœë¡œÂ `env.properties`Â íŒŒì¼ì„ ë‘ì—ˆì—ˆëŠ”ë°ìš”. ê·¸ë¦¬ê³  ì´ëŠ”Â `.gitignore`Â ì²˜ë¦¬ëœ íŒŒì¼ì…ë‹ˆë‹¤. ë°°í¬ë¥¼ í•˜ë©´ í•´ë‹¹ íŒŒì¼ì„ ì°¾ì§€ ëª»í•´ ì„œë²„ê°€ ê°€ë™ì´ ë˜ì§€ ì•ŠëŠ”ë°ìš”. í•´ë‹¹Â `env.properties`Â ë¥¼ ë¹Œë“œ ì‹œ ì¶”ê°€í•´ì¤„ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì„ê¹Œìš”??

- **ê°•ì‚¬ë‹˜ ì½”ë“œ ë¦¬ë·° ì˜ê²¬**

![Untitled](./images/7.png)

</div>
</details>

> ğŸ‘‰ğŸ¿ **5ì£¼ì°¨ ë¯¸ì…˜ ì ‘ê·¼ ë°©ì‹**
>
> ì´ë²ˆ ë¯¸ì…˜ì„ ë³´ê³  ì œì¼ ê´€ì‹¬ì´ ê°”ë˜ ë¶€ë¶„ì€ `**í…ŒìŠ¤íŠ¸ ì½”ë“œ**`ì…ë‹ˆë‹¤. **ì—¬íƒœ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í˜¼ì ì§œì™”ì—ˆê³ ** ëˆ„êµ°ê°€ì—ê²Œ **`í”¼ë“œë°±`**ì„ ë°›ì•„ ë³¸ ì ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì— ë”ìš± ê·¸ë¬ë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸°ì—, ê¸°ë³¸ ìš”êµ¬ ì‚¬í•­ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œì™€ ë”ë¶ˆì–´ **ì¸í„°ì…‰í„° ì˜ì—­ê¹Œì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í•œë²ˆ ì‘ì„±í•´ë³´ëŠ”ë° ì¤‘ì **ì„ ë‘ê³  ë¯¸ì…˜ì„ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
>
> ë˜í•œ, CI/CD ìë™í™”ì˜ ê²½ìš° ë‚´ìš©ì´ ë§ì•˜ê¸° ë•Œë¬¸ì— (docker, workflow.. ) ë‹¨ê³„ë³„ë¡œ ì²œì²œíˆ ì§„í–‰í•´ë³´ë©´ì„œ ë°°í¬ê¹Œì§€ ìš°ì„  ì„±ê³µí•˜ëŠ”ë° ëª©í‘œë¥¼ ë‘ì—ˆìŠµë‹ˆë‹¤.

### **ğŸ“– ì£¼ìš” êµ¬í˜„ í˜•íƒœ**

<details style="padding-left: 2%">
<summary><h3 style="display: inline">TEST CODE</h3></summary>
<div markdown="1">

- **Spring ì„ ë„ìš°ì§€ ì•Šê³  Mocking ì„ í™œìš©**

```java
// Controller test ì˜ˆì œ
public class AdminItemControllerTest {

    @InjectMocks
    AdminItemController adminItemController;

    @Mock
    AdminItemService adminItemService;
	
    @BeforeEach
    void setup() {
            ...
    }

    @Test
    @DisplayName("ìƒí’ˆ ì¡°íšŒ API Test")
    void readHandle() throws Exception {
        ReadItemDto mockDto = ReadItemDto.builder().build();

        // given
        given(adminItemService.findItemById(anyLong())).willReturn(mockDto);

        // when
        ResultActions result = mockMvc
                                .perform(get("/api/admin/items/{itemId}", anyLong());

        // then
        result.andExpect(content().json(objectMapper.writeValueAsString(mockDto)));
    }
}
```

- **`Controller`** ê³„ì¸µ í…ŒìŠ¤íŠ¸ ì‹œ **ìš”ì²­**, **ì‘ë‹µ** **`body`** ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë¹„êµ

```java
@Test
void test() {
    ResultActions result = mockMvc.perform(patch(...).content(jsonData));
    result.andExpect(content().json(jsonData)));
}
```

- **íŠ¹ì • ì˜ˆì™¸ ìƒí™©ì„ ë°œìƒ ì‹œì¼œì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ” ì§€ ê²€ì¦**

```java
@Test
void test() {
    mockMvc.perform(patch(...)
                .content(jsonData))
                .andExpect(r -> assertTrue(r.getResolvedException() instanceof MyException))
                .andExpect(r -> assertEquals(r.getResolvedException().getMessage(), MyMessage))
}
```

- **í…ŒìŠ¤íŠ¸ ê·¸ë£¹í™”**

```java
class ì¸í„°ì…‰í„° í…ŒìŠ¤íŠ¸ {
    
    @Nested
    class ì¸ê°€ í…ŒìŠ¤íŠ¸ ê·¸ë£¹ {
        ...
    }

    @Nested
    class ì¸ì¦ í…ŒìŠ¤íŠ¸ ê·¸ë£¹ {
        ...
    }
    
}
```

</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Authorization Intercetor</h3></summary>
<div markdown="1">

- **`ì¸ì¦ ì¸í„°ì…‰í„°`** ê²€ì¦ ê³¼ì •

> 1. `Authorization` ê°’ì´ í—¤ë”ì— ì¡´ì¬í•˜ëŠ”ê°€?
> 2. í•´ë‹¹ ê°’ì—ì„œ `Bearer ` íŒ¨í„´ì„ ì°¾ì„ ìˆ˜ ìˆëŠ”ê°€?
> 3. í† í°ì´ ìœ íš¨í•œê°€?
> 4. í† í° ìœ í˜•ì´ `Access` ì¸ê°€?
> 5. í† í°ì´ ë§Œë£Œ ë˜ì—ˆëŠ”ê°€?

- **`ì¸í„°ì…‰í„°`** ì½”ë“œ ì˜ˆì‹œ

```java
@Test
@DisplayName("Authorization ê°’ì— `Bearer ` íŒ¨í„´ì´ ì—†ì„ ë•Œ")
void EmptyBearerString() {
    // empty `Bearer ` in header
    given(httpServletRequest.getHeader(HttpHeaders.AUTHORIZATION)).willReturn(mockAccessToken);

    Throwable throwable = catchThrowable(() ->
            authenticationInterceptor.preHandle(httpServletRequest, httpServletResponse, any(Object.class)));

    assertEquals(throwable.getMessage(), ErrorCode.NOT_VALID_BEARER_GRANT_TYPE.getMessage());
    assertTrue(throwable instanceof NotValidTokenException);

    // empty space like `Bearerabce`
    given(httpServletRequest.getHeader(HttpHeaders.AUTHORIZATION)).willReturn("Bearer" + mockAccessToken);

    throwable = catchThrowable(() ->
            authenticationInterceptor.preHandle(httpServletRequest, httpServletResponse, any(Object.class)));

    assertEquals(throwable.getMessage(), ErrorCode.NOT_VALID_BEARER_GRANT_TYPE.getMessage());
    assertTrue(throwable instanceof NotValidTokenException);
}
```

</div>
</details>

</div>
</details>

#### [ğŸ“¤ ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](#1tech-stack)

<br>

# 5ï¸âƒ£ Refactoring

<br>

> ğŸ’¡ ë¦¬íŒ©í† ë§ì€ ì‹œê°„ì„ ë”°ë¡œ íˆ¬ìí•˜ì—¬ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤. **ì²«ì§¸ë¡œ** ìš°ì„  ê¸°ëŠ¥ê°œë°œì„ ëë§ˆì¹œ í›„, ì½”ë“œë¥¼ ì²œì²œíˆ ë‹¤ì‹œ ì½ìœ¼ë©´ì„œ ë¦¬íŒ©í† ë§ì„ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤. ë‘˜ì§¸ë¡œëŠ” **í”¼ì–´ ë¦¬ë·°** ë° **ê°•ì‚¬ë‹˜ ë¦¬ë·°ê°€ ëë‚œ ì‹œì **ì—ì„œ ì œì‹œí•´ì¤€ ì˜ê²¬ê³¼ í”¼ë“œë°±ì„ ì ì ˆíˆ ì¡°ìœ¨í•˜ì—¬ ë¦¬íŒ©í† ë§ í–ˆìŠµë‹ˆë‹¤. ë” ì´ìƒ ìˆ˜ì •í•  ë¶€ë¶„ì´ ë³´ì´ì§€ ì•ŠëŠ” ê²½ìš°, ë‹¤ìŒ ë¯¸ì…˜ì„ ì§„í–‰í•˜ëŠ” í˜•íƒœë¡œ í–ˆìŠµë‹ˆë‹¤.

- **refactoring ì ìš© ê³ ë ¤ ëŒ€ìƒ**

```
1. ì˜ëª»ëœ ë©”ì†Œë“œ, ë³€ìˆ˜ëª… í˜¹ì€ íŒ¨í‚¤ì§€ ê²½ë¡œ
2. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ì†Œë“œ, ë³€ìˆ˜ëª…
3. ì¤‘ë³µì´ ë°œìƒí•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë©”ì†Œë“œ í˜¹ì€ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬
4. í´ë˜ìŠ¤ì˜ ì±…ì„ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê²½ìš°
5. ì½”ë“œëŸ‰ì„ ì¤„ì¼ ìˆ˜ ìˆëŠ” ë¡œì§
6. ì¶”ìƒí™” í•  ìˆ˜ ìˆëŠ” ë¡œì§
```

<details style="padding-left: 2%">
<summary><h3 style="display: inline">ì†Œì…œ ë¡œê·¸ì¸ ì¶”ìƒí™” ë¦¬íŒ©í† ë§ ê³¼ì • ì‚´í´ë³´ê¸°</h3></summary>
<div markdown="1">

> 1ï¸âƒ£ ë¯¸ì…˜ì—ëŠ” **`ì¹´ì¹´ì˜¤`** ì†Œì…œ ë¡œê·¸ì¸ì„ êµ¬í˜„í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ì´ì— ë”°ë¼, **ìš°ì„ ** `ì¹´ì¹´ì˜¤` í† í°ì„ íšë“í•˜ê³ , ì‚¬ìš©ì ì •ë³´ë¥¼ ë°›ì•„ì™€ ë¡œê·¸ì¸í•˜ëŠ” ê¸°ëŠ¥ì„ ë¨¼ì € ê°œë°œí•˜ì˜€ìŠµë‹ˆë‹¤.

- **ë¡œê·¸ì¸ ì„œë¹„ìŠ¤ (í˜„ì¬ Kakao ë¼ëŠ” ì†Œì…œ ë¯¸ë””ì–´ì— ì¢…ì†ë˜ì–´ ìˆìŒ)**

<p id="original-code">

```java
@Service
public class LoginService {

    ...
    
    private final KakaoLoginFeignClient kakaoLoginFeignClient;

    @Transactional
    public TokenDto loginProcess(String memberType, String kakaoAccessToken) throws URISyntaxException {

        URI kApiUri = new URI(KakaoEndpoints.KAPI);
        KakaoUserInfo* kakaoUserInfo = kakaoLoginFeignClient.getKakaoUserByToken(kApiUri, kakaoAccessToken);

        String email = kakaoUserInfo.getKakaoAccount().getEmail();
        Optional<Member> dbMember = memberRepository.findByMemberTypeAndEmail(MemberType.create(memberType), email);

        TokenDto tokenDto = tokenManager.createTokenDto(email, Role.USER);

        ...

        return tokenDto;
    }
}
```
</p>

#### [ğŸ“¤ **ë¦¬íŒ©í† ë§ ëœ ì½”ë“œ ë³´ê¸°**](#newCode)

> 2ï¸âƒ£ ê·¸ëŸ° ë’¤, íƒ€ ì†Œì…œ ë¯¸ë””ì–´ì¸ `Naver`, `Google` ì´ ì¶”ê°€ ë  ìˆ˜ë„ ìˆë‹¤ëŠ” ë¶€ë¶„ì„ ìƒê°í•˜ì—¬ ê³µí†µ í–‰ìœ„ë¥¼ ì •ë¦¬í•˜ê³  ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.

- **ê³µí†µ**ìœ¼ë¡œ ë¬¶ì„ ìˆ˜ ìˆëŠ” ì˜ì—­ì„ ì•„ë˜ì™€ ê°™ì´ ì •ë¦¬

> 1. **ì†Œì…œ í† í°**ì„ íšë“í•˜ëŠ” í–‰ìœ„, **ì‚¬ìš©ì ì •ë³´**ë¥¼ ê°€ì ¸ì˜¤ëŠ” í–‰ìœ„
> 2. ì†Œì…œ ê°ì²´ì™€ Feign clint ê°ì²´ëŠ” **KAKAO, NAVER, GOOGLE** ë¡œ ë¶„ë¥˜ ëœë‹¤.
> 3. ê° ì†Œì…œ api ì—ì„œ ì‚¬ìš©ì ì •ë³´ ê°’ìœ¼ë¡œ **email** ê³¼ **name** ì„ ê°€ì ¸ì˜¨ë‹¤

- **ê³µí†µ í–‰ìœ„ ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤** ì¶”ê°€

```java
public interface SocialLoginClient {

    SocialTokenResponseDto getSocialTokenByAuth(SocialTokenReqDto socialTokenReqDto);
    SocialMemberInfo getSocialMemberInfoByToken(URI baseUrl, String socialAccessToken);

}

public interface SocialMemberInfo {

    String getSocialName();
    String getSocialEmail();

}
```

<aside>
3ï¸âƒ£ ê·¸ë¦¬ê³  ê° ì†Œì…œ ê°ì²´ê°€ ì¶”ìƒ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì† ë°›ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

</aside>

- ì¶”ìƒí™” ìƒì†

```java
@FeignClient(...)
public interface KakaoLoginFeignClient extends SocialLoginClient {

    @PostMapping(value = "..", consumes = ...)
    SocialTokenResponseDto*** getSocialTokenByAuth(@SpringQueryMap SocialTokenReqDto socialTokenReqDto);

    @PostMapping(value = "..", consumes = ...)
    KakaoUserInfo getSocialMemberInfoByToken(...) String socialAccessToken);

}
```

```java
public class KakaoUserInfo implements SocialMemberInfo {
    ...

    @Override
    public String getSocialName() {
        ...
    }

    @Override
    public String getSocialEmail() {
        ...
    }
}
```

> 4ï¸âƒ£ ë‹¤ìŒìœ¼ë¡œ íŒ©í† ë¦¬ë¥¼ ë§Œë“¤ì–´, ì†Œì…œ íƒ€ì… **(kakao, naver .. )** ë“±ì— ë”°ë¼ ì‹¤ í–‰ë™ ê°ì²´ë¥¼ ìƒì„±í•´ì£¼ëŠ” ì±…ì„ì„ ì§€ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

- ì†Œì…œ `api client` íŒ©í† ë¦¬

```java
public class SocialApiClientFactory {

    private final KakaoLoginFeignClient kakaoLoginFeignClient;

    public SocialLoginClient getSocialLoginClient(MemberType memberType) {
        
        return switch (memberType) {
            case KAKAO -> kakaoLoginFeignClient;
            case NAVER, GOOGLE, GENERAL -> null;
        };
    }

}
```

> 5ï¸âƒ£ ì´ì œ, ë§Œë“¤ì–´ ë‘” ì¬ë£Œë“¤ì„ **ì†Œì…œ ì„œë¹„ìŠ¤** ë¡œì´ì–´ì— ëª¨ì•„ì„œ ì¶”ìƒí™” ê°œë…ìœ¼ë¡œ ë¡œì§ì„ ë§Œë“¤ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤.

- **SocialLoginService** ( ë” ì´ìƒ kakao ì— ì¢…ì† ë˜ì§€ ì•ŠìŒ )

```java
public class SocialLoginService {

    private final SocialApiClientFactory apiClientFactory;
    private final SocialApiEndPointFactory apiEndPointFactory;

    public SocialTokenResponseDto getSocialToken(MemberType memberType, SocialTokenReqDto socialTokenRequestDto) {
        SocialLoginClient client = apiClientFactory.getSocialLoginClient(memberType);
        return client.getSocialTokenByAuth(socialTokenRequestDto);
    }

    public SocialMemberInfo getSocialMemberInfo(MemberType memberType, String socialAccessToken) throws URISyntaxException {
        SocialLoginClient socialLoginClient = apiClientFactory.getSocialLoginClient(memberType);

        URI apiHost = apiEndPointFactory.getMemberInfoApiEndPoint(memberType);
        return socialLoginClient.getSocialMemberInfoByToken(apiHost, socialAccessToken);
    }
}
```

> 6ï¸âƒ£ [**ì²˜ìŒ ë³´ì—¬ë“œë¦° ì½”ë“œ**](#original-code) ì•„ë˜ì™€ ê°™ì´ **`ë¦¬íŒ©í† ë§`** ë˜ì—ˆìŠµë‹ˆë‹¤.
>
> - ì†Œì…œ ë©¤ë²„ ì •ë³´ëŠ” `socialLoginService` ê°€ ì§€ë„ë¡ í–ˆë‹¤
> - ì†Œì…œ ë¡œì§ì´ ë¶„ë¦¬ë˜ì–´ ê°€ë…ì„±ì´ ì˜¬ë¼ê°”ë‹¤
> - `LoginService` ëŠ” ìœ„ì˜ ì •ë³´ë¡œ ë¡œê·¸ì¸ ì²˜ë¦¬ ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤
> - ì†Œì…œ íƒ€ì…ì— ë”°ë¼ `Kakao`, `Naver`, `Google` ëª¨ë‘ ë¡œê·¸ì¸ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤. **(ì¶”ìƒí™”)**

<p id="newCode">

```java
public class LoginService {

    private final TokenManager tokenManager;
    private final MemberRepository memberRepository;
    private final SocialLoginService socialLoginService;

    @Transactional
    public TokenDto doSocialLogin(MemberType memberType, String socialAccessToken) throws URISyntaxException {

        SocialMemberInfo socialMemberInfo = socialLoginService.getSocialMemberInfo(memberType, socialAccessToken);
        String email = socialMemberInfo.getSocialEmail();

        Optional<Member> dbMember = memberRepository.findByMemberTypeAndEmail(memberType, email);

        ...
    }
}
```

</p>

#### [ğŸ“¤ ì²˜ìŒ ì½”ë“œë¡œ ëŒì•„ê°€ê¸°](#original-code)

</div>
</details>

#### [ğŸ“¤ ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](#1tech-stack)

<br>

# 6ï¸âƒ£ íšŒê³ 

<details style="padding-left: 2%">
<summary><h3 style="display: inline">ìƒˆë¡œìš´ ê¸°ìˆ ì˜ ì‚¬ìš©</h3></summary>
<div markdown="1">

> ğŸ’¡ ë¯¸ì…˜ì—ì„œ **ê¸°ìˆ **ê³¼ **ë¼ì´ë¸ŒëŸ¬ë¦¬( jpa, thymeleaf, security, jwt, social-token â€¦ )** ë“¤ì´ ì €ì—ê²ŒëŠ” ëª¨ë‘ ìƒì†Œí•œ ê²ƒë“¤ì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë§¤ì£¼ ë¯¸ì…˜ì„ ë°›ì•„ë„ ê³§ë°”ë¡œ êµ¬í˜„í•  ìˆ˜ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ë„, í•­ìƒ ë¯¸ì…˜ ì „ì— ì‹¤ìŠµ í•´ë³´ê³ , ìƒí™© ë³„ë¡œ ì–´ë–¤ ë¶€ë¶„ì„ ì ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ë¨¼ì € í•™ìŠµí•œ ë’¤ì— ì²œì²œíˆ ìš”êµ¬ ì‚¬í•­ë“¤ì„ í•˜ë‚˜ì”© êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
> 
> ê°•ì‚¬ë‹˜ê»˜ êµ¬í˜„í•˜ëŠ” í˜•íƒœê°€ ì˜³ì€ ë°©í–¥ì¸ì§€ ì—¬ì­¤ë³´ê¸°ë„ í•˜ê³ , êµ¬í˜„í•˜ëŠ” ë°©ë²•ì´ ì—¬ëŸ¬ê°€ì§€ë¡œ ë‚˜ë‰  ë•Œ ì‹¤ë¬´ì—ì„œëŠ” ë³´í†µ ì–´ë–¤ ë°©í–¥ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ”ì§€ë„ ë¬¼ì–´ë³´ê³¤ í•˜ì˜€ìŠµë‹ˆë‹¤. ê²°êµ­ ëª¨ë“  ë¯¸ì…˜ ìš”êµ¬ì‚¬í•­ì„ êµ¬í˜„í•´ëƒˆê³ , ì—´ì‹¬íˆ ë‹¬ë ¤ì˜¨ ì œ ìì‹ ì´ ë¿Œë“¯í–ˆìŠµë‹ˆë‹¤.
> 
> ë¬´ì—‡ì´ë“  **ì²˜ìŒ ì ‘í•´ë³¸ ê¸°ìˆ ì„ ê°€ì§€ê³  ë¬´ì–¸ê°€ë¥¼ ë§Œë“¤ì—ˆì„ ë•Œë©´ ê¸°ë¶„ì´ ì •ë§ ì¢‹ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤**. ë™ì‹œì—, ë‹¤ë£° ìˆ˜ ìˆëŠ” ê¸°ìˆ ê³¼ ì˜ì—­ì´ í™•ì¥ëœ ê±¸ ëŠë‚„ ë•Œ ê²Œì„ ìºë¦­í„°ì²˜ëŸ¼ ë ˆë²¨ì´ ì˜¤ë¥¸ ê²ƒ ê°™ì•„ ì •ë§ ë¿Œë“¯í•©ë‹ˆë‹¤!

</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">Mybatis & Jpa</h3></summary>
<div markdown="1">

> ğŸ’¡ ì €ëŠ” ORM f/w ë¡œ **mybatis** ê¸°ìˆ ì„ ì‚¬ìš©í•´ì™”ìŠµë‹ˆë‹¤. ì´ëŠ” ì¿¼ë¦¬ ì‘ì„±, í…Œì´ë¸” ìƒì„± ë“± ëª¨ë“  ê²ƒì„ ìˆ˜ì‘ì—…ìœ¼ë¡œ í•´ì£¼ì–´ì•¼ í•˜ëŠ” ë°˜ë©´, `**jpa**` ëŠ”`**Entity`** ë¥¼ ì •ì˜í•˜ë©´, ì´ì— ë”°ë¼ **í…Œì´ë¸” ìƒì„±** ë¿ ì•„ë‹ˆë¼, **ê´€ê³„ ë§¤í•‘**ê¹Œì§€ í•´ì¤€ë‹¤ëŠ” ê²ƒì´ ë„ˆë¬´ í¸ë¦¬í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, ìˆ˜ì • ì¿¼ë¦¬ë¥¼ ë”°ë¡œ ì‘ì„±í•˜ì§€ ì•Šê³  **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì¡´ì¬í•˜ëŠ” ì—”í„°í‹° ê°ì²´ ê°’ì„ ìˆ˜ì •ë§Œ í•´ì£¼ë©´ ìƒíƒœ ë³€í™”ë¥¼ ê°ì§€**í•˜ì—¬ ê°’ì„ ê°±ì‹  í•´ì£¼ëŠ” ê²Œ ë„ˆë¬´ í¸ë¦¬í–ˆìŠµë‹ˆë‹¤!
>
> í‰ì†Œì— `**jpa`** ë¥¼ í•œë²ˆ ì‚¬ìš©í•´ë³´ìëŠ” ë§ˆìŒì„ ê°€ì§€ê³  ìˆì—ˆëŠ”ë°, ì´ë²ˆì— jpa ë¥¼ ë‹¤ë£¬ ê²½í—˜ì„ í•˜ê²Œ ë˜ì–´ì„œ ë„ˆë¬´ ì¢‹ì•˜ìŠµë‹ˆë‹¤!


</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">ì½”ë“œ ë¦¬ë·°ì™€ ê·¸ë£¹ í”¼ì–´ ë¦¬ë·°</h3></summary>
<div markdown="1">

> ğŸ’¡ ì €ì˜ ì½”ë“œë¥¼ ëˆ„êµ°ê°€ì—ê²Œ **ì½”ë“œ ë¦¬ë·°**ë¥¼ ë°›ëŠ” ì¼ì´ ì´ë²ˆì´ ì²˜ìŒì´ì—ˆìŠµë‹ˆë‹¤. ë‚¨ì˜ ì½”ë“œë¥¼ ì½ìœ¼ë©´ì„œ ìƒ‰ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ê°œë°œí•œ ë¶€ë¶„ë„ ì•Œ ìˆ˜ ìˆì—ˆê³ , ì‘ì„±í•  ë•ŒëŠ” ë³´ì´ì§€ ì•Šì•˜ë˜ ìš”ì†Œë“¤ì„ íŒ€ì›ë“¤ì´ ì°¾ì•„ì£¼ê¸°ë„ í•˜ë©°, ì½”ë“œ ì˜ê²¬ì„ ì œì‹œí•´ì£¼ëŠ” ë¶€ë¶„ë“¤ì´ ì €ì—ê²ŒëŠ” ë„ˆë¬´ ì¢‹ì€ ê²½í—˜ì´ì—ˆìŠµë‹ˆë‹¤. ì´ ê²½í—˜ì„ í†µí•´ì„œ, ì½”ë”© í€„ë¦¬í‹°ê°€ ë°œì „í–ˆë‹¤ëŠ” ëŠë‚Œì„ ë°›ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤!!

</div>
</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">ì‹œê°„ì  ì—¬ìœ ì˜ ë¶€ì¬</h3></summary>
<div markdown="1">

> ğŸ’¡ ì´ë²ˆ ìµìŠ¤í„´ì‹­ì—ì„œ ìƒˆë¡œìš´ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ê¸° ì „ì— ëª©í‘œë¡œ í•œ ê²ƒì´ ìˆìŠµë‹ˆë‹¤.  ìµœì†Œí•œ `**ê¸°ìˆ ì— ëŒ€í•œ ê¸°ë³¸ êµ¬ì¡°ì™€ ì–´ë–¤ ì›ë¦¬ë¡œ ì‘ë™í•˜ëŠ”ì§€ ì•Œê³  ì‚¬ìš©í•˜ì**` ê°€ ëª©í‘œì˜€ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, **ì‹œê°„ì ìœ¼ë¡œ ìƒê°ë³´ë‹¤ ì—¬ìœ ë¡­ì§€ ì•Šì•„**ì„œ ìƒì„¸í•˜ê²Œ ë“¤ì—¬ë‹¤ë³´ì§€ ëª»í•œ ì²´ ì‚¬ìš©í•˜ê²Œ ë˜ë”ë¼êµ¬ìš”. ì´ëŸ¬í•œ ë¶€ë¶„ì´ ì •ë§ ì•„ì‰¬ì›€ìœ¼ë¡œ ë‚¨ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.</div>

</details>

<details style="padding-left: 2%">
<summary><h3 style="display: inline">ìµìŠ¤í„´ì‹­ì„ ë§ˆì¹˜ë©°</h3></summary>
<div markdown="1">

> ğŸ’¡ í‰ì†Œì— ì €ëŠ” ì•„ë˜ì™€ ê°™ì€ **ì˜ë¬¸**ë“¤ì„ ê°€ì§€ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ì¸í„°ë„·ì—ì„œ ì‰½ê²Œ ì°¾ì•„ ë³¼ ìˆ˜ ìˆëŠ” ê°œë…ë“¤ì€ ì˜ë¬¸ì„ í•´ì†Œ í•´ì¤„ ë§Œí¼ ì™€ ë‹¿ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
> - ì‹¤ë¬´ì—ì„œ `security` ëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í• ê¹Œ?
> - ë‚´ê°€ ì§œì˜¤ë˜ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ì˜¬ë°”ë¥¸ ì½”ë“œì˜€ì„ê¹Œ?
> - ì‹¤ë¬´ì—ì„œ `back-end`ì˜ˆì™¸ ì²˜ë¦¬ëŠ” ì–´ë–¤ ì‹ìœ¼ë¡œ í•˜ëŠ” ê±¸ê¹Œ?
> - jwt í† í°ì„ ì‹¤ì œë¡œ ë°±, í”„ë¡ íŠ¸ ê°ê° ì–´ë–»ê²Œ êµ¬í˜„í• ê¹Œ?
> - ì†Œì…œ ë¡œê·¸ì¸ì„ í•˜ë©´ ë­ê°€ ì¢‹ì€ ê±¸ê¹Œ?
> - ì‹¤ë¬´ì—ì„  íŒ¨í‚¤ì§€ êµ¬ì¡°ë¥¼ ì–´ë–»ê²Œ ì§¤ê¹Œ?
> - Mybatis ê°€ ì•„ë‹Œ JPA ë¥¼ ì‚¬ìš©í•˜ë©´ ë­ê°€ ì¢‹ì„ê¹Œ?**
>
> **í•˜ì§€ë§Œ** ì´ë²ˆ ìµìŠ¤í„´ì‹­ì„ í†µí•´ ì§ì ‘ ì‚¬ìš©í•´ë³´ë©´ì„œ ëŒ€ë¶€ë¶„ ë°©í–¥ì„ ì°¾ì€ ëŠë‚Œì´ ë“¤ì—ˆìŠµë‹ˆë‹¤!! ë¬´ì—‡ë³´ë‹¤ ì•ìœ¼ë¡œ ë‚´ê°€ ì–´ë–¤ ê¸°ìˆ ì„ ì´ìš©í•´ ê°œë°œì„ í•˜ê³  ì‹¶ì€ì§€ ì•Œ ìˆ˜ ìˆì—ˆê¸°ì— ëœ» ê¹Šì€ ê²½í—˜ì´ì—ˆê³ , ëŠ¦ì€ ì‹œê°„ì—ë„ í•­ìƒ ë‹µë³€ í•´ì£¼ì‹  **ë³€êµ¬í›ˆ** ê°•ì‚¬ë‹˜ê»˜ ê°ì‚¬ ì¸ì‚¬ë¥¼ ë“œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤ **:)**

</div>
</details>

#### [ğŸ“¤ ë§¨ìœ„ë¡œ ì˜¬ë¼ê°€ê¸°](#top)

<br>

<h1>ê°ì‚¬í•©ë‹ˆë‹¤ğŸ˜„</h1> 
